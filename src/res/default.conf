# DEFAULT USER INPUT FILE
#-------------------------------------------------------------------------------
#-------------------------------------------------------------------------------

[modules]
initial_pool_module = IP_filling
relaxation_module = FHI_aims
comparison_module = structure_comparison
selection_module = selection
mutation_module = mutation_angles
crossover_module = crossover_angles
clustering_module = cluster

[run_settings]
property_to_optimize = energy
optimization_style = minimize
end_GA_structures_added = 10000 ; stop GA if this many structures (children) have been added to collection
failed_generation_attempts = 700
followed_top_structures = 1 ;
max_iterations_no_change = 500 ; stop GA followed_top_structures hasn't changed in max_iterations_no_change
end_GA_structures_total = 10000 ; stop GA if this many total structures have been added to collection
#recover_from_crashes = TRUE ; uncomment to recover from exceptions
##output_all_geometries = TRUE ; uncomment to default output geometry
verbose = TRUE ; uncomment to default 
restart_replicas = TRUE ;#If true running the GA will re-run all replicas in tmp
##restart_interval = 180
update_folder_interval = 60
orthogonalize_unit_cell = TRUE
num_molecules = 1

[parallel_settings]
replica_name = master
python_command = python
runjob_processes_per_node = 16
srun_gator_memory = 2048
srun_memory_per_node = 31232
srun_command_file = ./srun_calls.out
srun_completed_file = ./srun_completed.out
srun_submitted_file = ./srun_submitted.out
srun_memory_per_core = 512
srun_gres_name = craynetwork
restart_interval = 60
srun_max_runtime = 1800

[bundled_settings]
python_command = python

[FHI-aims]
#path_to_aims_executable = /lustre/project/nmarom/bin/aims.150205.scalapack.mpi.x
#execute_command = mpirun
initial_moment = hund
control_in_directory = control
#control_in_filelist = control.in.SPE control.in.FULL.dummy
#monitor_execution = TRUE
#update_poll_interval = 1 10
#update_poll_times = 60 60
#absolute_energy_thresholds = None None
#relative_energy_thresholds = None None
#reject_if_worst_energy = FALSE FALSE
save_successful_calc = TRUE
monitor_execution = TRUE
update_poll_times = 60 60
update_poll_interval = 10 10
save_relaxation_data = cartesian_atomic_coordinates Total_energy vdW_energy_correction Total_atomic_forces Hirshfeld_volume lattice_vector MBD_at_rsSCS_energy Maximum_force_component after_each_convergence_cycle

[initial_pool]
user_structures_dir = /user_initial_pools/test_set
#duplicate_check = TRUE
vector_for_comparison = 'RDF_smooth'
vector_cosdiff_threshold = 0.001
#scale_vol = TRUE
ltol = .2
stol = .3
angle_tol = 3
stored_energy_name = energy

[selection]
fitness_function = standard
fitness_reversal_probability = 0.0
percent_best_structs_to_select = 100

[pre_relaxation_comparison]
#scale_vol = TRUE
ltol = .2
stol = .4
angle_tol = 3

[post_relaxation_comparison]
energy_comp_window = 1.5 ; compare relaxed structure to structures within this energy window
#scale_vol = TRUE
ltol = .2
stol = .3
angle_tol = 2.5

[crossover]
max_attempts = 15
crossover_probability = 1.0

[symmetric_crossover]
swap_sym_prob = 0.5
swap_sym_tol = 0.01
blend_lat_prob = 0.5
blend_lat_tol = 0.01
blend_lat_cent = 0.5
blend_lat_std = 0.25
blend_mol_COM_prob = 0.5
blend_mol_COM_cent = 0.5
blend_mol_COM_std = 0.25
swap_mol_geo_prob = 0.5
swap_mol_geo_tol = 3.0
swap_mol_geo_orient_attempts = 100
blend_mol_orien_prob = 0.5
blend_mol_orien_cent = 0.5
blend_mol_orien_std = 0.25
blend_mol_orien_tol = 3.0
blend_mol_orien_ref_prob = 0.5
blend_mol_orien_orient_attempts = 100

[mutation]
double_mutate_prob = 0.0 ; means there is a 1/10 x mutation_probability chance of being doubly mutatated
stand_dev_trans = 2.0 ; stand dev of random translation mutation (A)
stand_dev_rot = 30 ; stand dev of random rotation (Deg)
stand_dev_strain = 0.3 ; stand dev of random strain
specific_mutations = Rand_trans Rand_strain Sym_strain Vol_strain Cell_angle Frame_rot Pair_rot Rand_rot Swap_mol Permute_mol Swap_rot Swap_ref
stand_dev_cell_angle = 20
enable_symmetry = TRUE

[lammps]
path_to_lammps_executable = /usr/bin/lammps

[cell_check_settings]
full_atomic_distance_check = 0.211672
interatomic_distance_check = 1.0
specific_radius_proportion = 0.65
target_volume = None

#volume_upper_ratio = 1.2
#volume_lower_ratio = 0.8
#lattice_vector_check = TRUE
#lattice_vector_lower_ratio = 0.6
#lattice_vector_upper_ratio = 1.6
#COM_distance_check = 3

[molar_mass]
H = 1
C = 12
N = 14
O = 16
S = 32
Cl = 36
Br = 80
F = 19

[pre_relaxation_comparison]
ltol = .2
stol = .4
angle_tol = 3

[post_relaxation_comparison]
energy_comp_window = 0.5 ; compare relaxed structure to structures within this energy window
ltol = .2
stol = .3
angle_tol = 3

[specific_radius]
H = 1.2
Zn = 1.39
He = 1.40
Cu = 1.40
F = 1.47
O = 1.52
Ne = 1.54
N = 1.55
Hg = 1.55
Cd = 1.58
Ni = 1.63
Pd = 1.63
Au = 1.66
C = 1.70
Ag = 1.72
Mg = 1.73
Cl = 1.75
Pt = 1.75
P = 1.80
S = 1.80
Li = 1.82
As = 1.85
Br = 1.85
U = 1.86
Ga = 1.87
Ar = 1.88
Se = 1.90
In = 1.83
Tl = 1.96
I = 1.98
Kr = 2.02
Pb = 2.02
Te = 2.06
Si = 2.10
Xe = 2.16
Sn = 2.17
Na = 2.27
K = 2.75
